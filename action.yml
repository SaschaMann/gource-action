name: 'Gource Action'
description: 'Creates a gource.io visualisation for a repo'
author: 'Sascha Mann'
branding:
  icon: 'film'
  color: 'blue'

inputs:
  gource-params:
    description: 'All parameters given to gource'
    default: ''
    required: false
  output-path:
    description: 'Path to write the video file to'
    default: 'out.mp4'
    required: false

runs:
  using: 'composite'
  steps:
    # Download gource
    - run: ./download-gource.sh
      shell: bash

    # Install gource
    - run: |
        cd gource
        ls -la
        ./configure
        make
        make install
      shell: bash

    # Test
    - run: gource -h
      shell: bash
